<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Applications and libraries - LapisOS documentation</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Documents for LapisOS">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../FOREWORD.html"><strong aria-hidden="true">1.</strong> Foreword</a></li><li class="chapter-item expanded "><a href="../FAQ.html"><strong aria-hidden="true">2.</strong> Frequently-asked Questions</a></li><li class="chapter-item expanded "><a href="../project/index.html"><strong aria-hidden="true">3.</strong> Project</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../project/roadmap.html"><strong aria-hidden="true">3.1.</strong> Roadmap</a></li><li class="chapter-item expanded "><a href="../project/development.html"><strong aria-hidden="true">3.2.</strong> Development</a></li></ol></li><li class="chapter-item expanded "><a href="../concepts/index.html"><strong aria-hidden="true">4.</strong> Concepts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../concepts/applications.html"><strong aria-hidden="true">4.1.</strong> What are applications?</a></li><li class="chapter-item expanded "><a href="../concepts/libraries.html"><strong aria-hidden="true">4.2.</strong> What are libraries?</a></li><li class="chapter-item expanded "><a href="../concepts/users.html"><strong aria-hidden="true">4.3.</strong> What are users?</a></li></ol></li><li class="chapter-item expanded "><a href="../features/index.html"><strong aria-hidden="true">5.</strong> Features</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../features/parental-control.html"><strong aria-hidden="true">5.1.</strong> Parental Control</a></li></ol></li><li class="chapter-item expanded "><a href="../ux/index.html"><strong aria-hidden="true">6.</strong> User Experience</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ux/notifications.html"><strong aria-hidden="true">6.1.</strong> Notifications</a></li></ol></li><li class="chapter-item expanded "><a href="../technical/index.html"><strong aria-hidden="true">7.</strong> Technical</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../technical/overview.html"><strong aria-hidden="true">7.1.</strong> Overview</a></li><li class="chapter-item expanded "><a href="../technical/controller.html"><strong aria-hidden="true">7.2.</strong> Controller</a></li><li class="chapter-item expanded "><a href="../technical/dev-mode.html"><strong aria-hidden="true">7.3.</strong> Developer Mode</a></li><li class="chapter-item expanded "><a href="../technical/devices.html"><strong aria-hidden="true">7.4.</strong> Devices</a></li></ol></li><li class="chapter-item expanded "><a href="../specs/index.html"><strong aria-hidden="true">8.</strong> Specifications</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../specs/applications-and-libraries.html" class="active"><strong aria-hidden="true">8.1.</strong> Applications and libraries</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">LapisOS documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/lapis-org/docs" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="applications-and-libraries"><a class="header" href="#applications-and-libraries">Applications and Libraries</a></h1>
<p>This document describes the structure, features and behaviours to both
<a href="../concepts/applications.html">applications</a> and <a href="../concepts/libraries.html">libraries</a>.</p>
<ul>
<li><a href="#applications-and-libraries">Applications and Libraries</a>
<ul>
<li><a href="#name-and-slug">Name and slug</a></li>
<li><a href="#application-identifier">Application Identifier</a></li>
<li><a href="#features">Features</a></li>
<li><a href="#the-manifest">The manifest</a></li>
</ul>
</li>
</ul>
<h2 id="name-and-slug"><a class="header" href="#name-and-slug">Name and slug</a></h2>
<p>Each application has a name as well as a slug. The name can any valid UTF-8 string,
while the slug must respect several rules:</p>
<ul>
<li>Only lowercase letters, underscores and digits</li>
<li>Must not start by a digit</li>
<li>Must not be the name of a native shell command</li>
<li>Must not be the name of a native shell function</li>
<li>Must not be the name of a shell type</li>
</ul>
<p>By default, the slug is auto-generated from the name, but it can also be customized.</p>
<h2 id="application-identifier"><a class="header" href="#application-identifier">Application Identifier</a></h2>
<p>From the slug is generated <em>Application's Identifier (AID)</em>, which is prefixed by the
developer's identifier (DID) specified in the application's manifest (it must match the
publisher's identifier on the store), and followed by two double points. The DID is submitted
to the same rules as the application's slug.</p>
<p>For instance, an application with a slug of <code>midori</code> made by a developer whose DID is
<code>gulje</code> will get an AID of <code>midori::gulje</code>.</p>
<p>The AID is unique across the store as well as in a single LapisOS installation. As malicious
application may provide the DID and the slug of a legit application (which is called <em>AID spoofing</em>),
sideloading is <a href="../concepts/applications.html#sideloading">verified by default</a>.</p>
<p>As AID are text-based and can be quite long (up to 512 bytes), programs can instead use the
<em>Application's Numeric IDentifier (ANID)</em>, which is 32-bit unique number randomly generated
by the system to refer to this particular application. On two different systems, the ANID of
a given application will likely be very different, and so cannot be guessed. It is provided
by the system during the application's launch through its <a href="">execution context (WIP)</a>.</p>
<p>System applications are registered under the reserved <code>sys</code> DID.</p>
<h2 id="features"><a class="header" href="#features">Features</a></h2>
<p>Applications as well as libraries can also declare <em>features</em>, which are opt-in parts of
the program. They are described in <a href="">the manifest (WIP)</a> and can be enabled or disabled
when installing a program.</p>
<p>Each feature allows to embed additional assets and declare additional supported languages
(e.g. language packs), and a specific build option is provided to the build tool to indicate
at build time weither a feature selected or not.</p>
<p>This allows to save space and build time when a specific feature isn't required, but should
still be embedded in the program itself instead of making an additional application or
library.</p>
<p>When the manifest declares one or more feature(s), it must also specify a set of <em>default features</em>
to enable, which are selected by default.</p>
<h2 id="the-manifest"><a class="header" href="#the-manifest">The manifest</a></h2>
<p>A <em>manifest</em> is a file describing the application or library. It is mandatory to build and
distribute it. Its content differ for applications and libraries, but there are some
common fields.</p>
<pre><code class="language-yaml"># [REQ] Informations about the application
infos:
	# [REQ] Application's name, as shown when installing it
	name: Cloud Notepad App
	# [REQ] Application's slug, as stored on the disk in the /apps directory
	slug: cloud-notepad-app
	# [REQ] Application's description, as shown when installing it
	description: A notepad application that allows syncing your files in the cloud
	# [REQ] Application's version, following semantic versioning
	version: 1.0.0
	# [REQ] Application's author(s)
	authors:
		- name: Gulce
		- email: guljeee@yandex.com
	# [REQ] Application's icons
	# [REQ] &quot;%{}&quot;: either 16, 32, 64, 128 or 256 pixels (icons must be square)
	icons: assets/icons/app/%{}.png
	# [REQ] Application's license
	license: Apache-2.0

# [REQ] Application package's content
content:
	# [REQ] Program
	program:
		# Packages can either contain source code only, pre-compiled programs only, or both
		# &lt;for source packages&gt; [REQ]
		source:
			# [REQ] Build tool (must in the list of the toolchain's supported build tools)
			toolchain: rust
			# [REQ] Required build tool-related options
			build: {}
			# [OPT] Build tool-related options
			options:
				optimize: O3

		# &lt;for precomp packages&gt; [REQ]
		precomp: main.lpp

	# [OPT] Assets
	assets:
		# Set of path to assets
		- ./assets/

# [REQ] Application's dependencies
dependencies:
	# [REQ] Required libraries
	libraries:
		sysver: ^1.0.0 # Any stable version

	# [OPT] Required fonts
	fonts:
		fonts:open-sans: true # Any version

# [OPT] Features
features:
	# Describe each feature, by name
	testing:
		# [OPT] Additional assets
		assets: []

		# [OPT] Feature's dependencies
		dependencies: {}

		# [OPT] Additional languages (e.g. language pack)
		languages: []
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../specs/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../specs/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
