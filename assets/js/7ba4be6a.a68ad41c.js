"use strict";(self.webpackChunkviolet_eco_github_io=self.webpackChunkviolet_eco_github_io||[]).push([[1986],{3905:(e,t,i)=>{i.d(t,{Zo:()=>h,kt:()=>y});var r=i(7294);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function o(e,t){if(null==e)return{};var i,r,a=function(e,t){if(null==e)return{};var i,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)i=n[r],t.indexOf(i)>=0||(a[i]=e[i]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)i=n[r],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}var l=r.createContext({}),c=function(e){var t=r.useContext(l),i=t;return e&&(i="function"==typeof e?e(t):s(s({},t),e)),i},h=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var i=e.components,a=e.mdxType,n=e.originalType,l=e.parentName,h=o(e,["components","mdxType","originalType","parentName"]),p=c(i),m=a,y=p["".concat(l,".").concat(m)]||p[m]||u[m]||n;return i?r.createElement(y,s(s({ref:t},h),{},{components:i})):r.createElement(y,s({ref:t},h))}));function y(e,t){var i=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var n=i.length,s=new Array(n);s[0]=m;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o[p]="string"==typeof e?e:a,s[1]=o;for(var c=2;c<n;c++)s[c]=i[c];return r.createElement.apply(null,s)}return r.createElement.apply(null,i)}m.displayName="MDXCreateElement"},8360:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>n,metadata:()=>o,toc:()=>c});var r=i(7462),a=(i(7294),i(3905));const n={slug:"integrity",sidebar_position:3,description:"Integrity is a crucial aspect of Violet, ensuring the stability, security and reliability of the system."},s="Integrity",o={unversionedId:"technical/integrity",id:"technical/integrity",title:"Integrity",description:"Integrity is a crucial aspect of Violet, ensuring the stability, security and reliability of the system.",source:"@site/docs/technical/integrity.md",sourceDirName:"technical",slug:"/technical/integrity",permalink:"/docs/technical/integrity",draft:!1,editUrl:"https://github.com/violet-eco/docs/tree/main/docs/docs/technical/integrity.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{slug:"integrity",sidebar_position:3,description:"Integrity is a crucial aspect of Violet, ensuring the stability, security and reliability of the system."},sidebar:"violetSidebar",previous:{title:"Developer Mode",permalink:"/docs/technical/developer-mode"},next:{title:"Multi-Platform Management",permalink:"/docs/technical/multi-platform"}},l={},c=[{value:"System Immutability",id:"system-immutability",level:2},{value:"Hashes",id:"hashes",level:2},{value:"Checking Hashes",id:"checking-hashes",level:2}],h={toc:c},p="wrapper";function u(e){let{components:t,...i}=e;return(0,a.kt)(p,(0,r.Z)({},h,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"integrity"},"Integrity"),(0,a.kt)("p",null,"Integrity is a crucial aspect of Violet, ensuring the stability, security\nand reliability of the system."),(0,a.kt)("h2",{id:"system-immutability"},"System Immutability"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"/sys")," folder in Violet is designed as immutable, meaning that\nit cannot be modified by any user or process, including the main administrator.\nThis strict immutability ensures the integrity and consistency of system-level\ncomponents and configurations. The only exceptions to this immutability rule are the\nrepair process and system updates initiated by the operating system itself."),(0,a.kt)("h2",{id:"hashes"},"Hashes"),(0,a.kt)("p",null,"To ensure the integrity of critical files within the ",(0,a.kt)("inlineCode",{parentName:"p"},"/sys")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"/sys/etc")," directories,\nViolet employs the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/BLAKE3-team/BLAKE3"},(0,a.kt)("inlineCode",{parentName:"a"},"BLAKE3"))," hashing algorithm.\nWhen these files are written or updated, their contents are hashed, and the resulting\nhash values are stored in the system's hash registry, located at ",(0,a.kt)("inlineCode",{parentName:"p"},"/etc/sys/hashes"),"."),(0,a.kt)("h2",{id:"checking-hashes"},"Checking Hashes"),(0,a.kt)("p",null,"During the boot process or when critical files are accessed, Violet performs integrity\nchecks by recalculating the hashes of the files and comparing them with the values stored\nin the hash registry. If the calculated hashes do not match the stored values, it\nindicates that the file has been tampered with or corrupted."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"System (",(0,a.kt)("inlineCode",{parentName:"li"},"/sys"),") or System Backup (",(0,a.kt)("inlineCode",{parentName:"li"},"/sys/backup"),"):",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"If a hash mismatch is detected in a system file, Violet initiates a check of the system backup's integrity."),(0,a.kt)("li",{parentName:"ul"},"If the backup is intact, the system will restore itself from the backup."),(0,a.kt)("li",{parentName:"ul"},"If the backup is also corrupted, the system will refuse to boot and prompt for reinstallation."),(0,a.kt)("li",{parentName:"ul"},"Users' personal documents and data will remain unaffected unless they have been specifically corrupted."))),(0,a.kt)("li",{parentName:"ol"},"Hash Registry (",(0,a.kt)("inlineCode",{parentName:"li"},"/etc/sys/hashes"),") or Registry (",(0,a.kt)("inlineCode",{parentName:"li"},"/etc/sys/registry"),"):",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Similar to the system files, a hash mismatch in the hash registry or system registry triggers a check of the system backup's integrity."),(0,a.kt)("li",{parentName:"ul"},"If the backup is valid, the system will restore itself from the backup, preserving the integrity of the hash registry and registry files."))),(0,a.kt)("li",{parentName:"ol"},"Crash Save:",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"In the case of crash saves, if a hash mismatch is detected, the corresponding crash save file will not be restored."),(0,a.kt)("li",{parentName:"ul"},"This precautionary measure ensures that potentially corrupted crash saves do not compromise the stability or security of the system."),(0,a.kt)("li",{parentName:"ul"},"In exceptional cases, users may choose to force the restoration of crash saves, but they are warned about the potential risks and instability it may introduce."))),(0,a.kt)("li",{parentName:"ol"},"Sandbox:",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"If a hash mismatch occurs in a sandbox file, the system will refuse to start the sandbox."),(0,a.kt)("li",{parentName:"ul"},"This safeguard prevents potential security breaches that could arise from compromised or tampered sandbox environments."),(0,a.kt)("li",{parentName:"ul"},"As with crash saves, there is an option to force the startup of the sandbox, but it is accompanied by a warning highlighting the associated risks.")))))}u.isMDXComponent=!0}}]);